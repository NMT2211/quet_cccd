<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Qu√©t QR CCCD + Chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ m·ªõi</title>

  <!-- ‚úÖ Load local lib t·ª´ node_modules (kh√¥ng CDN) -->
  <!-- N·∫øu b·∫°n deploy l√™n hosting kh√¥ng c√≥ node_modules, h√£y copy file n√†y ra th∆∞ m·ª•c public (vd: /assets/html5-qrcode.min.js) -->
  <script src="./node_modules/html5-qrcode/html5-qrcode.min.js"></script>

  <style>
    :root{
      --bg:#0b1220; --card:#111a2e; --muted:#9fb0d0; --text:#e7efff;
      --line: rgba(255,255,255,.10);
      --btn:#2b6cff; --btn2:#16a34a; --danger:#ef4444; --warn:#f59e0b;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(43,108,255,.25), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(22,163,74,.18), transparent 55%),
        var(--bg);
      color:var(--text);
      padding:24px;
    }
    .wrap{max-width:1100px;margin:0 auto;display:grid;gap:16px}
    .top{display:flex;gap:14px;flex-wrap:wrap;align-items:flex-end;justify-content:space-between}
    h1{margin:0;font-size:20px;font-weight:700;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:13px;margin-top:6px;line-height:1.4}
    .grid{display:grid;grid-template-columns: 380px 1fr;gap:16px}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      padding:16px;
    }
    .row{display:flex;gap:10px;flex-wrap:wrap}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input, textarea, select{
      width:100%;
      border-radius:12px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.25);
      color:var(--text);
      padding:10px 12px;
      outline:none;
    }
    textarea{min-height:90px;resize:vertical}
    .btn{
      cursor:pointer;
      border:0;
      padding:10px 12px;
      border-radius:12px;
      color:white;
      font-weight:650;
      background: var(--btn);
      transition:.15s transform, .15s opacity;
    }
    .btn:hover{opacity:.92}
    .btn:active{transform: translateY(1px)}
    .btn.secondary{background: rgba(255,255,255,.10); color: var(--text); border:1px solid var(--line)}
    .btn.ok{background: var(--btn2)}
    .btn.danger{background: var(--danger)}
    .btn:disabled{opacity:.55; cursor:not-allowed}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size:12px;
    }
    .kv{display:grid;grid-template-columns: 160px 1fr; gap:10px; padding:10px 0; border-top:1px dashed var(--line)}
    .kv:first-child{border-top:0}
    .k{color:var(--muted);font-size:12px}
    .v{font-weight:650}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
    .status{margin-top:10px;color:var(--muted);font-size:12px;line-height:1.5}
    .warn{color: var(--warn)}
    .error{color: var(--danger)}
    .oktxt{color: #86efac}
    .small{font-size:12px;color:var(--muted)}
    .two{display:grid;grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 640px){ .two{grid-template-columns:1fr} }
    #reader{border-radius:14px;overflow:hidden;border:1px solid var(--line);background: rgba(0,0,0,.2)}
    code.inline{background: rgba(255,255,255,.08);padding:2px 6px;border-radius:8px;border:1px solid var(--line)}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>Qu√©t QR CCCD ‚Üí L·∫•y th√¥ng tin + Chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ m·ªõi</h1>
        <div class="sub">
          Trang tƒ©nh ch·∫°y tr√™n tr√¨nh duy·ªát. API chuy·ªÉn ƒë·ªïi d√πng <code class="inline">tinhthanhpho.com</code>.
        </div>
      </div>
      <div class="pill" id="libStatus">üì¶ ƒêang ki·ªÉm tra th∆∞ vi·ªán qu√©t QR...</div>
    </div>

    <div class="grid">
      <!-- LEFT -->
      <div class="card">
        <div class="row" style="justify-content:space-between; align-items:center">
          <div style="font-weight:700">üì∑ Camera QR Scanner</div>
          <div class="row">
            <button class="btn" id="btnStart">B·∫Øt ƒë·∫ßu qu√©t</button>
            <button class="btn secondary" id="btnStop" disabled>D·ª´ng</button>
          </div>
        </div>

        <div style="height:12px"></div>
        <div id="reader"></div>

        <div class="status" id="scanStatus">Tr·∫°ng th√°i: <b>Ch∆∞a qu√©t</b></div>

        <div style="height:12px"></div>
        <label>Ho·∫∑c d√°n chu·ªói QR th·ªß c√¥ng</label>
        <textarea id="rawInput" placeholder='VD: 034205011440|---|Nguy·ªÖn Minh Tu·∫•n|22082005|Nam|T·ªï 4B, Kp 1, H·ªôi Nghƒ©a, Th·ªã x√£ T√¢n Uy√™n, B√¨nh D∆∞∆°ng|19042021'></textarea>
        <div class="row" style="margin-top:10px">
          <button class="btn secondary" id="btnParse">Parse d·ªØ li·ªáu</button>
          <button class="btn danger" id="btnClear">X√≥a</button>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card">
        <div style="font-weight:700">ü™™ Th√¥ng tin ƒë·ªçc t·ª´ QR</div>
        <div class="small">Format: ph√¢n t√°ch b·∫±ng d·∫•u <span class="mono">|</span></div>

        <div style="height:10px"></div>

        <div id="infoBox">
          <div class="kv"><div class="k">S·ªë CCCD</div><div class="v mono" id="cccd">‚Äî</div></div>
          <div class="kv"><div class="k">H·ªç t√™n</div><div class="v" id="name">‚Äî</div></div>
          <div class="kv"><div class="k">Ng√†y sinh</div><div class="v" id="dob">‚Äî</div></div>
          <div class="kv"><div class="k">Gi·ªõi t√≠nh</div><div class="v" id="gender">‚Äî</div></div>
          <div class="kv"><div class="k">ƒê·ªãa ch·ªâ (c≈©)</div><div class="v" id="oldAddr">‚Äî</div></div>
          <div class="kv"><div class="k">Ng√†y c·∫•p</div><div class="v" id="issue">‚Äî</div></div>
        </div>

        <div style="height:14px"></div>
        <hr style="border:0;border-top:1px solid var(--line);margin:0 0 14px" />

        <div style="font-weight:700">üîÅ Chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ m·ªõi</div>
        <div class="small">POST <code class="inline">/api/v1/convert/address</code> (Bearer API key)</div>

        <div style="height:12px"></div>

        <div class="two">
          <div>
            <label>API Key (Bearer)</label>
            <input id="apiKey" placeholder="Nh·∫≠p API key (Authorization: Bearer ...)" />
          </div>
          <div>
            <label>Ch·∫ø ƒë·ªô d√≤ m√£ h√†nh ch√≠nh</label>
            <select id="mode">
              <option value="smart" selected>T·ª± t√°ch & d√≤ m√£ t·ª´ ƒë·ªãa ch·ªâ</option>
              <option value="manual">Nh·∫≠p tay province/district/ward + street</option>
            </select>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="two" id="manualCodes" style="display:none">
          <div><label>provinceCode</label><input id="provinceCode" placeholder="VD: 74" /></div>
          <div><label>districtCode</label><input id="districtCode" placeholder="VD: 723..." /></div>
          <div><label>wardCode</label><input id="wardCode" placeholder="VD: 257..." /></div>
          <div><label>streetAddress</label><input id="streetAddress" placeholder="VD: T·ªï 4B, Kp 1" /></div>
        </div>

        <div class="row" style="margin-top:10px">
          <button class="btn ok" id="btnConvert">Chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ</button>
          <button class="btn secondary" id="btnGuess">T·ª± d√≤ m√£ (xem log)</button>
        </div>

        <div class="status" id="convertStatus" style="margin-top:12px">‚Äî</div>

        <div style="height:10px"></div>
        <label>K·∫øt qu·∫£ (ƒë·ªãa ch·ªâ m·ªõi)</label>
        <textarea id="newAddr" readonly placeholder="ƒê·ªãa ch·ªâ m·ªõi s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>

        <div style="height:10px"></div>
        <label>Log k·ªπ thu·∫≠t</label>
        <textarea id="log" readonly class="mono" placeholder="Log request/response s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
      </div>
    </div>
  </div>

  <script>
    // ====== Basic helpers ======
    const $ = (id) => document.getElementById(id);

    function setScanStatus(html) { $("scanStatus").innerHTML = `Tr·∫°ng th√°i: ${html}`; }
    function setConvertStatus(html) { $("convertStatus").innerHTML = html; }

    function fmtDDMMYYYY(s) {
      if (!s) return "‚Äî";
      const t = ("" + s).trim();
      if (/^\d{8}$/.test(t)) return `${t.slice(0,2)}/${t.slice(2,4)}/${t.slice(4,8)}`;
      return t;
    }

    function logLine(line) {
      const box = $("log");
      box.value = (box.value ? box.value + "\n" : "") + line;
      box.scrollTop = box.scrollHeight;
    }

    // ====== QR parse ======
    function normalizeQR(raw) { return (raw || "").trim().replace(/\|\s*---\s*\|/g, "|"); }
    function parseQR(raw) {
      const s = normalizeQR(raw);
      const parts = s.split("|").map(x => (x || "").trim()).filter(x => x.length > 0);
      if (parts.length < 6) throw new Error("Chu·ªói QR kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng (c·∫ßn t·ªëi thi·ªÉu 6 tr∆∞·ªùng).");
      return { cccd: parts[0], name: parts[1], dob: parts[2], gender: parts[3], address: parts[4], issue: parts[5] };
    }

    function fillInfo(data) {
      $("cccd").textContent = data?.cccd || "‚Äî";
      $("name").textContent = data?.name || "‚Äî";
      $("dob").textContent = fmtDDMMYYYY(data?.dob);
      $("gender").textContent = data?.gender || "‚Äî";
      $("oldAddr").textContent = data?.address || "‚Äî";
      $("issue").textContent = fmtDDMMYYYY(data?.issue);
    }

    // ====== Address helpers (match m·ªÅm, kh√¥ng ph·ª• thu·ªôc keyword API) ======
    function splitAddress(addr) {
      const chunks = (addr || "").trim().split(",").map(x => x.trim()).filter(Boolean);
      if (chunks.length < 3) return { street: (addr || "").trim(), wardName:"", districtName:"", provinceName:"" };
      return {
        street: chunks.slice(0,-3).join(", ").trim(),
        wardName: chunks[chunks.length-3],
        districtName: chunks[chunks.length-2],
        provinceName: chunks[chunks.length-1],
      };
    }

    function stripDiacritics(s) {
      return (s || "").normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g,"d").replace(/ƒê/g,"D");
    }
    function normName(s) {
      return stripDiacritics(s).toLowerCase()
        .replace(/\b(thanh pho|thi xa|quan|huyen|thi tran|xa|phuong|tp)\b/g, "")
        .replace(/[^\w\s]/g, " ")
        .replace(/\s+/g, " ").trim();
    }
    function bestMatch(list, targetName) {
      if (!list?.length) return null;
      const target = normName(targetName);
      let found = list.find(x => normName(x.name) === target);
      if (found) return found;
      found = list.find(x => normName(x.name).includes(target) || target.includes(normName(x.name)));
      return found || null;
    }

    // ====== API tinhthanhpho ======
    const BASE = "https://tinhthanhpho.com/api/v1";

    async function apiGET(path, params) {
      const url = new URL(BASE + path);
      Object.entries(params || {}).forEach(([k,v]) => {
        if (v !== undefined && v !== null && (""+v).length > 0) url.searchParams.set(k, v);
      });

      logLine("GET " + url.toString());
      const res = await fetch(url.toString(), { headers: { "Accept": "application/json" }});
      const data = await res.json().catch(() => ({}));
      logLine("‚Ü≥ " + res.status + " " + JSON.stringify(data).slice(0, 1200));

      if (!res.ok) throw new Error(`GET ${path} l·ªói HTTP ${res.status}`);
      if (data && data.success === false) throw new Error(data.message || "API success=false");
      return data;
    }

    async function apiPOST(path, body, apiKey) {
      const url = BASE + path;
      logLine("POST " + url);
      logLine("Body: " + JSON.stringify(body));

      const res = await fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "Authorization": "Bearer " + apiKey
        },
        body: JSON.stringify(body)
      });
      const data = await res.json().catch(() => ({}));
      logLine("‚Ü≥ " + res.status + " " + JSON.stringify(data).slice(0, 1600));

      if (!res.ok) throw new Error(`POST ${path} l·ªói HTTP ${res.status}` + (data?.message ? `: ${data.message}` : ""));
      if (data && data.success === false) throw new Error(data.message || "API success=false");
      return data;
    }

    async function findProvince(provinceName) {
      // provinces c√≥ keyword OK
      const res = await apiGET("/provinces", { keyword: provinceName, limit: 20, page: 1 });
      const list = res.data || [];
      if (!list.length) throw new Error("Kh√¥ng t√¨m th·∫•y t·ªânh: " + provinceName);
      return bestMatch(list, provinceName) || list[0];
    }

    async function findDistrictInProvince(provinceCode, districtName) {
      // ‚úÖ FIX: KH√îNG d√πng keyword ·ªü endpoint n√†y (b·∫°n ƒë√£ th·∫•y tr·∫£ [] r·ªìi)
      // L·∫•y full danh s√°ch districts v√† t·ª± match.
      const res = await apiGET(`/provinces/${encodeURIComponent(provinceCode)}/districts`, { limit: 500, page: 1 });
      const list = res.data || [];
      if (!list.length) throw new Error("API tr·∫£ 0 districts cho province=" + provinceCode);

      let d = bestMatch(list, districtName);
      if (!d) d = bestMatch(list, districtName.replace(/th·ªã x√£/ig, "th√†nh ph·ªë"));
      if (!d?.code) throw new Error("Kh√¥ng match ƒë∆∞·ª£c district: " + districtName);
      return d;
    }

    async function findWardInDistrict(districtCode, wardName) {
      // ‚úÖ FIX: t∆∞∆°ng t·ª± wards
      const res = await apiGET(`/districts/${encodeURIComponent(districtCode)}/wards`, { limit: 1000, page: 1 });
      const list = res.data || [];
      if (!list.length) throw new Error("API tr·∫£ 0 wards cho district=" + districtCode);

      let w = bestMatch(list, wardName);
      if (!w) w = bestMatch(list, wardName.replace(/\b(x√£|ph∆∞·ªùng|th·ªã tr·∫•n)\b/ig, ""));
      if (!w?.code) throw new Error("Kh√¥ng match ƒë∆∞·ª£c ward: " + wardName);
      return w;
    }

    async function guessCodesFromAddress(addr) {
      const { street, wardName, districtName, provinceName } = splitAddress(addr);
      if (!provinceName || !districtName || !wardName) {
        throw new Error("Kh√¥ng t√°ch ƒë∆∞·ª£c t·ªânh/huy·ªán/x√£ (c·∫ßn 3 c·ª•m cu·ªëi c√°ch nhau b·ªüi d·∫•u ph·∫©y).");
      }

      setConvertStatus(`ƒêang d√≤ m√£: <b>${provinceName}</b> / <b>${districtName}</b> / <b>${wardName}</b> ...`);

      const prov = await findProvince(provinceName);
      const dist = await findDistrictInProvince(prov.code, districtName);
      const ward = await findWardInDistrict(dist.code, wardName);

      return { provinceCode: prov.code, districtCode: dist.code, wardCode: ward.code, streetAddress: street || "" };
    }

    // ====== QR scanner (html5-qrcode) ======
    let qr = null;
    let currentData = null;

    async function onScanSuccess(decodedText) {
      try {
        setScanStatus(`<b class="oktxt">ƒê√£ qu√©t</b> ‚Ä¢ <span class="mono">${decodedText}</span>`);
        $("rawInput").value = decodedText;

        const data = parseQR(decodedText);
        currentData = data;
        fillInfo(data);

        setConvertStatus(`<span class="oktxt">Parse OK.</span> B·∫•m <b>Chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ</b> ƒë·ªÉ l·∫•y ƒë·ªãa ch·ªâ m·ªõi.`);
      } catch (e) {
        setScanStatus(`<b class="error">L·ªói parse</b> ‚Ä¢ ${e.message}`);
      }
    }

    async function startScanner() {
      if (typeof window.Html5Qrcode === "undefined") {
        setScanStatus(`<b class="error">Kh√¥ng load ƒë∆∞·ª£c Html5Qrcode</b> ‚Ä¢ Ki·ªÉm tra ƒë∆∞·ªùng d·∫´n script local.`);
        return;
      }

      if (!qr) qr = new Html5Qrcode("reader");

      $("btnStart").disabled = true;
      $("btnStop").disabled = false;
      setScanStatus("<b>ƒêang m·ªü camera...</b>");

      try {
        await qr.start(
          { facingMode: "environment" },
          { fps: 12, qrbox: { width: 280, height: 280 } },
          onScanSuccess
        );
        setScanStatus("<b class='oktxt'>ƒêang qu√©t...</b> ƒê∆∞a QR v√†o khung.");
      } catch (e) {
        $("btnStart").disabled = false;
        $("btnStop").disabled = true;
        setScanStatus(`<b class="error">Kh√¥ng m·ªü ƒë∆∞·ª£c camera</b> ‚Ä¢ ${e.message}`);
      }
    }

    async function stopScanner() {
      if (!qr) return;
      try { await qr.stop(); await qr.clear(); } catch {}
      $("btnStart").disabled = false;
      $("btnStop").disabled = true;
      setScanStatus("<b>ƒê√£ d·ª´ng</b>");
    }

    // ====== UI events ======
    $("btnStart").addEventListener("click", startScanner);
    $("btnStop").addEventListener("click", stopScanner);

    $("btnClear").addEventListener("click", () => {
      $("rawInput").value = "";
      $("newAddr").value = "";
      $("log").value = "";
      currentData = null;
      fillInfo({});
      setScanStatus("<b>Ch∆∞a qu√©t</b>");
      setConvertStatus("‚Äî");
    });

    $("btnParse").addEventListener("click", () => {
      try {
        const data = parseQR($("rawInput").value);
        currentData = data;
        fillInfo(data);
        setConvertStatus(`<span class="oktxt">Parse OK.</span> B·∫•m <b>Chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ</b> ƒë·ªÉ l·∫•y ƒë·ªãa ch·ªâ m·ªõi.`);
      } catch (e) {
        setConvertStatus(`<span class="error">L·ªói:</span> ${e.message}`);
      }
    });

    $("mode").addEventListener("change", (e) => {
      $("manualCodes").style.display = (e.target.value === "manual") ? "grid" : "none";
    });

    $("btnGuess").addEventListener("click", async () => {
      try {
        $("log").value = "";
        const addr = currentData?.address || $("oldAddr").textContent;
        const codes = await guessCodesFromAddress(addr);
        logLine("‚úÖ Guessed codes: " + JSON.stringify(codes));
        setConvertStatus(
          `<span class="oktxt">D√≤ m√£ OK.</span> province=<b>${codes.provinceCode}</b>, district=<b>${codes.districtCode}</b>, ward=<b>${codes.wardCode}</b>`
        );

        // ƒë·ªï s·∫µn v√†o √¥ manual ƒë·ªÉ b·∫°n ki·ªÉm tra
        $("provinceCode").value = codes.provinceCode;
        $("districtCode").value = codes.districtCode;
        $("wardCode").value = codes.wardCode;
        $("streetAddress").value = codes.streetAddress || "";
      } catch (e) {
        setConvertStatus(`<span class="error">D√≤ m√£ l·ªói:</span> ${e.message}`);
      }
    });

    $("btnConvert").addEventListener("click", async () => {
      try {
        $("newAddr").value = "";
        $("log").value = "";

        const apiKey = ($("apiKey").value || "").trim();
        if (!apiKey) throw new Error("B·∫°n ch∆∞a nh·∫≠p API key.");
        if (!currentData?.address) throw new Error("Ch∆∞a c√≥ ƒë·ªãa ch·ªâ c≈©. H√£y qu√©t QR ho·∫∑c parse d·ªØ li·ªáu tr∆∞·ªõc.");

        let payload;

        if ($("mode").value === "manual") {
          const provinceCode = ($("provinceCode").value || "").trim();
          const districtCode = ($("districtCode").value || "").trim();
          const wardCode = ($("wardCode").value || "").trim();
          const streetAddress = ($("streetAddress").value || "").trim();
          if (!provinceCode || !districtCode || !wardCode) throw new Error("Thi·∫øu m√£ province/district/ward.");
          payload = { provinceCode, districtCode, wardCode, streetAddress };
        } else {
          payload = await guessCodesFromAddress(currentData.address);
        }

        setConvertStatus("<b>ƒêang g·ªçi API chuy·ªÉn ƒë·ªïi...</b>");
        const res = await apiPOST("/convert/address", payload, apiKey);

        const newFull = res?.data?.new?.fullAddress || "";
        const notes = res?.data?.mergeInfo?.notes || "";

        if (!newFull) {
          $("newAddr").value = JSON.stringify(res, null, 2);
          setConvertStatus(`<span class="warn">C√≥ ph·∫£n h·ªìi nh∆∞ng kh√¥ng th·∫•y new.fullAddress.</span> ƒê√£ ƒë·ªï JSON v√†o √¥ k·∫øt qu·∫£.`);
          return;
        }

        $("newAddr").value = notes ? `${newFull}\n\nGhi ch√∫: ${notes}` : newFull;
        setConvertStatus(`<span class="oktxt">Th√†nh c√¥ng!</span> ƒê·ªãa ch·ªâ m·ªõi ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t.`);
      } catch (e) {
        setConvertStatus(`<span class="error">L·ªói:</span> ${e.message}`);
      }
    });

    // ===== Boot: check local lib + enable start =====
    (function boot() {
      const badge = $("libStatus");
      if (typeof window.Html5Qrcode === "undefined") {
        badge.textContent = "üì¶ Kh√¥ng load ƒë∆∞·ª£c Html5Qrcode (local). Ki·ªÉm tra ƒë∆∞·ªùng d·∫´n ./node_modules/html5-qrcode/html5-qrcode.min.js";
        badge.classList.add("error");
        $("btnStart").disabled = true;
        setScanStatus(`<b class="warn">Kh√¥ng th·ªÉ qu√©t camera</b> ‚Ä¢ B·∫°n v·∫´n c√≥ th·ªÉ d√°n chu·ªói QR th·ªß c√¥ng.`);
        return;
      }

      badge.textContent = "üì¶ Th∆∞ vi·ªán QR: OK (local node_modules)";
      badge.classList.add("oktxt");
      $("btnStart").disabled = false;
      setScanStatus("<b class='oktxt'>S·∫µn s√†ng</b> ‚Ä¢ B·∫•m ‚ÄúB·∫Øt ƒë·∫ßu qu√©t‚Äù.");
    })();
  </script>
</body>
</html>

